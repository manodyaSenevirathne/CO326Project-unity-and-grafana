# co326-unity-and-grafana

This repo contains the files(Unity and Grafana) of a project that aims to create a digital twin for the electrical system of a building . 

## Components

### Unity Files

- **camera_move.cs**: Script to control camera movement.
- **co2lvl.cs**: Script to handle CO2 level visualization.
- **FetchGrafanaData.cs**: Script to fetch data from Grafana and update Unity components.
- **light_intensity_control.cs**: Script to control the light intensity smoothly.
- **smoke_detector.cs**: Script to control the smoke detector light state.
- **temp_light.cs**: Script to control the light color based on temperature.

### Python Files

- **data_gen.py**: Script to generate synthetic sensor data for testing.

### Web Files

- **compiled files/index.html**: HTML file to host the Unity WebGL build.

## Usage

### Unity

1. Open the Unity project located in the `unity files/` directory.
2. Attach the relevant scripts to the corresponding GameObjects in your Unity scene.
3. Build the Unity project for WebGL and place the build files in the `compiled files/Build/` directory.

### Grafana

1. Use the `docker-compose.yml` to set up Grafana and InfluxDB.
2. Import the `Grafana dashboard snapshot.json` to set up the Grafana dashboard.
3. Ensure that the data generated by `data_gen.py` is being sent to InfluxDB.

### Running the Project

1. Start the Grafana and InfluxDB services using Docker.
2. Run the `data_gen.py` script to generate and send synthetic data to InfluxDB.
3. Open the `compiled files/index.html` in a web browser to view the Unity WebGL build.
4. The Unity application will fetch data from Grafana and update the digital twin accordingly.

## Scripts Overview

### light_intensity_control.cs

This script controls the light intensity of a GameObject with a `Light` component. It includes a coroutine to smoothly transition the light intensity.

### FetchGrafanaData.cs

This script fetches data from Grafana and updates various Unity components based on the fetched data.

### temp_light.cs

This script controls the color of a light based on temperature values. It includes a coroutine to smoothly transition the light color.

### smoke_detector.cs

This script controls the state of a light to simulate a smoke detector.
